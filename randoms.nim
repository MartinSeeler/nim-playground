import mylist, typetraits

iterator randomsOf*(n: int, t: typeDesc) =
  var r: t
  var f = open("/dev/urandom")
  for i in (0.. <n):
    discard f.readBuffer(addr r, sizeof(r))
    yield r
  close(f)


when isMainModule:
  for i in 10.randomsOf(uint64):
    echo($i)

  # 10149563188935701139
  # 13180653380288251742
  # 6100659465407706607
  # 6331060017477085766
  # 12279138990046702458
  # 8844163115643255864
  # 9786875515088415363
  # 6612275089978387718
  # 13285368504988026791
  # 5976386099920342975
  
  for i in 10.randomsOf(uint8):
    echo($i)

  # 139
  # 196
  # 178
  # 201
  # 234
  # 151
  # 98
  # 126
  # 29
  # 172  
  
  for i in 10.randomsOf(float64):
    echo($i)

  # -1.117465189704202e-22
  # -2.236307160733167e+306
  # -3.581463526570157e+113
  # -9.539297966187549e+98
  # 1.650991697570771e+228
  # 3.054226178161782e+199
  # 1.373745802401064e+192
  # 1.319110559672805e+70
  # 1.354960155656841e+23
  # 9.561736707713118e-268

  let xs = asList(10.randomsOf(uint32));
  echo xs
  echo name(type(xs))

  # List[437697227, 1740115456, 1987687968, 2851730747, 344210209, 725178597, 2207962926, 3847938044, 3525270153, 3308887875]
  # List[uint32]